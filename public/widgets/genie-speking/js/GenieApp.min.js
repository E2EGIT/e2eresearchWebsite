// function genieButtonOn() {
//     $("#genie-on-off-switch").addClass("genie-btn-on"), $("#genie-on-off-switch").html("ON");
// }
// function genieButtonOff() {
//     $("#genie-on-off-switch").removeClass("genie-btn-on"), $("#genie-on-off-switch").html("OFF");
// }
// $(document).ready(function () {
//     var a = document.getElementById("audio"),
//         b = (document.getElementById("audio").setAttribute("src", genieTypeAudio), !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)),
//         d = navigator.userAgent.toLowerCase().indexOf("android") > -1;
//     $("#animateimg").attr("src", genieTypeVoice),
//         genieButtonOn(),
//         b || d ? (genieButtonOff(), $("#genieimg").animate({ right: "-90px" }, 10)) : setTimeout(function () {}, 500),
//         (document.getElementById("audio").oncanplaythrough = function () {
//             this.play(), $("#animateimg").attr("src", geniepaly);
//         }),
//         (document.getElementById("audio").onended = function () {
//             a.pause(),
//                 $("#animateimg").attr("src", genieTypeVoice),
//                 setTimeout(function () {
//                     $("#genieimg").animate({ right: "-262px" }, 500);
//                 }, 1e3),
//                 genieButtonOff();
//         }),
//         (document.getElementById("audio").onplaying = function () {
//             $("#animateimg").attr("src", geniepaly);
//         });
// }),
//     (window.onload = function () {
//         $(document).ready(function () {
//             $("#genie-on-off-switch").click(function () {
//                 $("#genie-on-off-switch").toggleClass("genie-btn-on"),
//                     "OFF" == $(this).text()
//                         ? ($(this).html("ON"),
//                           setTimeout(function () {
//                               (audio.currentTime = 0), audio.play();
//                           }, 500),
//                           $("#genieimg").animate({ right: "-90px" }, 500))
//                         : ($(this).html("OFF"),
//                           audio.pause(),
//                           $("#animateimg").attr("src", genieTypeVoice),
//                           setTimeout(function () {
//                               $("#genieimg").animate({ right: "-262px" }, 500);
//                           }, 1e3));
//             });
//         });
//     });
// //# sourceMappingURL=GenieApp.min.js.map


// Function to turn the genie button ON


// Function to turn the genie button ON

// Function to turn the genie button ON

// Function to turn the genie button ON

// Function to turn the genie button ON
function genieButtonOn() {
    $("#genie-on-off-switch").addClass("genie-btn-on");
    $("#genie-on-off-switch").html("ON");
}

// Function to turn the genie button OFF
function genieButtonOff() {
    $("#genie-on-off-switch").removeClass("genie-btn-on");
    $("#genie-on-off-switch").html("OFF");
}

$(document).ready(function () {
    // Grab the audio element only once
    var audioElement = document.getElementById("audio");

    // Set the audio source only if it's not already set
    if (!audioElement.src) {
        var genieAudioSrc = genieTypeAudio;  // Ensure genieTypeAudio is defined
        audioElement.setAttribute("src", genieAudioSrc);
    }

    // Handle genie image source on initial load
    $("#animateimg").attr("src", genieTypeVoice);
    genieButtonOn();

    // User agent checks for Safari and Android
    var isSafari = !!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/);
    var isAndroid = navigator.userAgent.toLowerCase().indexOf("android") > -1;

    // If it's Safari or Android, adjust behavior (like hiding genie button and image)
    if (isSafari || isAndroid) {
        genieButtonOff();
        $("#genieimg").animate({ right: "-90px" }, 10);
    }

    // Audio event listeners
    audioElement.oncanplaythrough = function () {
        // Check if the audio is paused before playing
        if (audioElement.paused) {
            audioElement.play();
            $("#animateimg").attr("src", geniepaly);  // Ensure geniepaly is defined
        }
    };

    audioElement.onended = function () {
        audioElement.pause();
        $("#animateimg").attr("src", genieTypeVoice);
        setTimeout(function () {
            $("#genieimg").animate({ right: "-262px" }, 500);
        }, 1000);
        genieButtonOff();
    };

    audioElement.onplaying = function () {
        $("#animateimg").attr("src", geniepaly);  // Ensure geniepaly is defined
    };

    // Button click handler to toggle audio play/pause
    $("#genie-on-off-switch").click(function () {
        var isPlaying = $(this).text() === "ON";  // Check if the button is currently "ON"

        if (isPlaying) {
            // Turn off audio and hide genie image
            $(this).html("OFF");
            audioElement.pause();
            $("#animateimg").attr("src", genieTypeVoice);
            setTimeout(function () {
                $("#genieimg").animate({ right: "-262px" }, 500);
            }, 1000);
        } else {
            // Turn on audio and show genie image
            $(this).html("ON");

            // Only play audio if it's currently paused
            if (audioElement.paused) {
                audioElement.currentTime = 0;  // Start from the beginning
                audioElement.play();
                $("#genieimg").animate({ right: "-90px" }, 500);
            }
        }
    });
});
